---
title: "R Notebook"
output: html_notebook
---

```{r}
# Check if package is installed and load it, otherwise install and then load
if (!requireNamespace("tidyverse", "lubridate", quietly = TRUE)) {
  install.packages("tidyverse", lubridate)
}

library(tidyverse, lubridate)
```

```{r}
data <- read_csv("/Users/thomassimmons/Downloads/Synthetic_Student_Survey_Data.csv", show_col_types = FALSE)
```

```{r}
head(data)
```

```{r}
# Average satisfaction by year
housing_summary <- data %>%
  group_by(year) %>%
  summarise(
    avg_housing = mean(housing_satisfaction),
    avg_sustainability = mean(sustainability_importance)
  )

print(housing_summary)
```

```{r}
# visualization
housing_summary %>%
  pivot_longer(cols = starts_with("avg_"), names_to="category", values_to="score") %>%
  ggplot(aes(x=year, y=score, fill=category)) +
  geom_col(position="dodge") +
  labs(title="Average Housing & Sustainability Ratings by Year",
       x = "Student Year", y = "Average Rating (1 to 5)")+
  theme_minimal()
```

```{r}
# events attended by club membership count
engagement_plot <- data %>% 
  ggplot(aes(x=club_memberships, y=events_attended)) +
  geom_jitter(alpha=0.3, color='blue') +
  geom_smooth(method='lm', color='red') +
  labs(title='Events Attended vs Club Memberships',
       x='Number of Club Memberships', y="Events Attended") +
  theme_minimal()

print(engagement_plot)
```

```{r}
# new member growth
new_member_trend <- data %>%
  group_by(month = floor_date(as.Date(survey_date), "month")) %>%
  summarise(new_members = sum(joined_this_year))

ggplot(new_member_trend, aes(x = month, y = new_members)) +
  geom_line(color = "darkgreen") +
  geom_point() +
  labs(title = "New Member Growth Over Time",
       x = "Month", y = "Number of New Members") +
  theme_minimal()
```









